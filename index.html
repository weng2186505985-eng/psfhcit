<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#fef5f5">
    <title>PsycheFit - ä¾æ‹é£æ ¼æµ‹è¯•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #fef5f5 0%, #f0e8f5 50%, #e8f0f5 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* è£…é¥°æ€§èƒŒæ™¯åœ†åœˆ - å¢å¼ºåŠ¨ç”» */
        .bg-circle {
            position: fixed;
            border-radius: 50%;
            opacity: 0.15;
            pointer-events: none;
            z-index: 0;
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(10px, -10px) scale(1.05); }
            50% { transform: translate(-10px, 10px) scale(0.95); }
            75% { transform: translate(10px, 10px) scale(1.02); }
        }

        .bg-circle-1 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, #ffc9d4, transparent);
            top: 10%;
            left: -100px;
            animation-delay: 0s;
        }

        .bg-circle-2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, #c9d4ff, transparent);
            bottom: 10%;
            right: -150px;
            animation-delay: -10s;
        }

        .bg-circle-3 {
            width: 250px;
            height: 250px;
            background: radial-gradient(circle, #d4ffc9, transparent);
            top: 50%;
            right: -80px;
            animation-delay: -5s;
        }

        .container {
            position: relative;
            z-index: 1;
            max-width: 100%;
            min-height: 100vh;
            padding: 0;
        }

        /* Header - å¢å¼º */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .header.scrolled {
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 22px;
            font-weight: 600;
            color: #2d3748;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }

        .logo-icon:active {
            transform: scale(0.95);
        }

        .settings-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #718096;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .settings-icon:active {
            transform: scale(0.9);
            background: rgba(255, 255, 255, 1);
        }

        /* Welcome Screen - å¢å¼ºåŠ¨ç”» */
        .welcome-screen {
            text-align: center;
            padding: 60px 24px 40px;
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: white;
            padding: 10px 20px;
            border-radius: 20px;
            color: #718096;
            font-size: 14px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            animation: fadeInUp 0.6s ease 0.1s both;
        }

        .badge-pulse {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .main-title {
            font-size: 36px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
            line-height: 1.2;
            animation: fadeInUp 0.6s ease 0.2s both;
        }

        .main-title .highlight {
            background: linear-gradient(135deg, #a8b5c8, #c8b5d8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            font-size: 16px;
            color: #718096;
            line-height: 1.6;
            margin-bottom: 40px;
            padding: 0 20px;
            animation: fadeInUp 0.6s ease 0.3s both;
        }

        .start-button {
            background: linear-gradient(135deg, #8fa89f, #a8b89f);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 30px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(143, 168, 159, 0.3);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            animation: fadeInUp 0.6s ease 0.4s both;
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(143, 168, 159, 0.4);
        }

        .start-button:active {
            transform: translateY(0) scale(0.98);
        }

        .time-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: #a0aec0;
            font-size: 14px;
            margin-top: 20px;
            animation: fadeInUp 0.6s ease 0.5s both;
        }

        .learn-more {
            color: #a0aec0;
            font-size: 14px;
            margin-top: 30px;
            cursor: pointer;
            transition: color 0.3s ease;
            animation: fadeInUp 0.6s ease 0.6s both;
        }

        .learn-more:hover {
            color: #718096;
        }

        /* Reflection Screen - æ–°å¢ */
        .reflection-screen {
            display: none;
            text-align: center;
            padding: 80px 24px 40px;
            animation: fadeIn 0.8s ease;
        }

        .reflection-icon {
            font-size: 120px;
            margin-bottom: 40px;
            animation: pulse 2s ease-in-out infinite;
        }

        .reflection-title {
            font-size: 28px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .reflection-subtitle {
            font-size: 16px;
            color: #718096;
            line-height: 1.6;
            margin-bottom: 40px;
        }

        .growth-section {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .growth-label {
            color: #d4a5a5;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 15px;
        }

        .growth-bar {
            width: 100%;
            height: 8px;
            background: rgba(143, 168, 159, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        .growth-fill {
            height: 100%;
            background: linear-gradient(90deg, #8fa89f, #a8b89f);
            border-radius: 10px;
            width: 0;
            animation: growthFill 2s ease-out forwards;
        }

        @keyframes growthFill {
            to { width: 35%; }
        }

        /* Test Screen - ä¼˜åŒ– */
        .test-screen {
            display: none;
            padding: 20px 24px 40px;
            animation: fadeIn 0.4s ease;
        }

        .test-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .scenario-label {
            color: #d4a5a5;
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .scenario-number {
            color: #a0aec0;
            font-size: 16px;
        }

        .progress-bar {
            width: 120px;
            height: 8px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 10px;
            margin: 20px auto;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f4c4c4, #c4d4f4);
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .question-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 40px 24px;
            text-align: center;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.05);
            animation: slideInLeft 0.4s ease;
        }

        .icon-circle {
            width: 80px;
            height: 80px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            font-size: 36px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            animation: iconBounce 0.6s ease;
        }

        @keyframes iconBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .question-title {
            font-size: 22px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .question-desc {
            font-size: 15px;
            color: #718096;
            line-height: 1.6;
        }

        .select-label {
            color: #d4a5a5;
            font-size: 12px;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 20px;
            text-align: center;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .option {
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid transparent;
            border-radius: 20px;
            padding: 20px;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            animation: slideInRight 0.4s ease;
            animation-fill-mode: both;
        }

        .option:nth-child(1) { animation-delay: 0.1s; }
        .option:nth-child(2) { animation-delay: 0.2s; }
        .option:nth-child(3) { animation-delay: 0.3s; }

        .option:hover {
            transform: translateX(5px);
        }

        .option:active {
            transform: scale(0.98);
        }

        .option.selected {
            border-color: #a8b89f;
            background: linear-gradient(135deg, rgba(168, 184, 159, 0.15), rgba(168, 184, 159, 0.08));
            box-shadow: 0 5px 20px rgba(168, 184, 159, 0.2);
            transform: translateX(8px);
        }

        .option-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .option-radio {
            width: 20px;
            height: 20px;
            border: 2px solid #cbd5e0;
            border-radius: 50%;
            display: inline-block;
            position: relative;
            transition: all 0.3s ease;
        }

        .option.selected .option-radio {
            border-color: #a8b89f;
            background: #a8b89f;
        }

        .option.selected .option-radio::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }

        .option-desc {
            font-size: 14px;
            color: #718096;
            line-height: 1.5;
            padding-left: 30px;
        }

        /* Navigation buttons - ä¼˜åŒ– */
        .nav-buttons {
            display: flex;
            gap: 12px;
            margin-top: 30px;
            position: sticky;
            bottom: 20px;
            z-index: 10;
        }

        .nav-button {
            flex: 1;
            padding: 16px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .btn-back {
            background: rgba(255, 255, 255, 0.9);
            color: #718096;
            border: 2px solid #e2e8f0;
        }

        .btn-back:active {
            transform: scale(0.95);
        }

        .btn-next {
            background: linear-gradient(135deg, #8fa89f, #a8b89f);
            color: white;
            box-shadow: 0 4px 15px rgba(143, 168, 159, 0.3);
        }

        .btn-next:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(143, 168, 159, 0.4);
        }

        .btn-next:active:not(:disabled) {
            transform: translateY(0) scale(0.98);
        }

        .btn-next:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Result Screen - å¤§å¹…ä¼˜åŒ– */
        .result-screen {
            display: none;
            padding: 20px 24px 40px;
            animation: fadeIn 0.6s ease;
        }

        .result-header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeInUp 0.6s ease;
        }

        .result-title {
            font-size: 14px;
            color: #a0aec0;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        .attachment-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 30px 24px;
            margin-bottom: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            animation: slideInLeft 0.6s ease 0.2s both;
            position: relative;
            overflow: hidden;
        }

        .attachment-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #8fa89f, #a8b89f);
        }

        .attachment-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-bottom: 20px;
        }

        .badge-healthy {
            background: rgba(143, 168, 159, 0.2);
            color: #5a7a6a;
        }

        .badge-anxious {
            background: rgba(255, 150, 120, 0.2);
            color: #cc6644;
        }

        .badge-avoidant {
            background: rgba(120, 150, 200, 0.2);
            color: #5577aa;
        }

        .badge-fearful {
            background: rgba(200, 150, 200, 0.2);
            color: #aa7799;
        }

        .attachment-name {
            font-size: 28px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .attachment-desc {
            font-size: 15px;
            color: #4a5568;
            line-height: 1.8;
            margin-bottom: 25px;
        }

        /* è¯¦ç»†ç‰¹å¾ - æ–°å¢ */
        .characteristics {
            background: rgba(248, 250, 252, 0.8);
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
        }

        .characteristics-title {
            font-size: 14px;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .characteristic-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 10px 0;
            border-bottom: 1px solid rgba(226, 232, 240, 0.5);
        }

        .characteristic-item:last-child {
            border-bottom: none;
        }

        .characteristic-icon {
            font-size: 18px;
            flex-shrink: 0;
        }

        .characteristic-text {
            font-size: 14px;
            color: #4a5568;
            line-height: 1.6;
        }

        /* æˆé•¿å»ºè®® - æ–°å¢ */
        .growth-tips {
            background: linear-gradient(135deg, rgba(143, 168, 159, 0.1), rgba(168, 184, 159, 0.1));
            border-radius: 16px;
            padding: 20px;
            margin: 20px 0;
        }

        .growth-tips-title {
            font-size: 14px;
            font-weight: 600;
            color: #5a7a6a;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .growth-tip-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .growth-tip-item:last-child {
            margin-bottom: 0;
        }

        .growth-tip-title {
            font-size: 14px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .growth-tip-desc {
            font-size: 13px;
            color: #718096;
            line-height: 1.6;
        }

        /* åˆ†æ•°åˆ†å¸ƒ - æ–°å¢ */
        .score-distribution {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            animation: slideInRight 0.6s ease 0.4s both;
        }

        .score-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            text-align: center;
        }

        .score-item {
            margin-bottom: 16px;
        }

        .score-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .score-name {
            color: #4a5568;
            font-weight: 500;
        }

        .score-value {
            color: #718096;
        }

        .score-bar-bg {
            height: 8px;
            background: rgba(226, 232, 240, 0.5);
            border-radius: 10px;
            overflow: hidden;
        }

        .score-bar-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0;
        }

        .score-bar-fill.secure { background: linear-gradient(90deg, #8fa89f, #a8b89f); }
        .score-bar-fill.anxious { background: linear-gradient(90deg, #ff9678, #ffb699); }
        .score-bar-fill.avoidant { background: linear-gradient(90deg, #7896c8, #98b6e8); }
        .score-bar-fill.fearful { background: linear-gradient(90deg, #c896c8, #d8b6d8); }

        .read-more {
            color: #8fa89f;
            font-size: 14px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: gap 0.3s ease;
        }

        .read-more:hover {
            gap: 10px;
        }

        .action-buttons {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .share-button, .restart-button {
            flex: 1;
            padding: 16px 24px;
            border-radius: 30px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .share-button {
            background: linear-gradient(135deg, #8fa89f, #a8b89f);
            color: white;
            box-shadow: 0 4px 15px rgba(143, 168, 159, 0.3);
        }

        .restart-button {
            background: white;
            color: #718096;
            border: 2px solid #e2e8f0;
        }

        .share-button:active, .restart-button:active {
            transform: scale(0.98);
        }

        .wisdom-card {
            background: linear-gradient(135deg, rgba(255, 240, 245, 0.8), rgba(245, 240, 255, 0.8));
            backdrop-filter: blur(10px);
            border-radius: 24px;
            padding: 30px 24px;
            text-align: center;
            margin-top: 30px;
            animation: fadeInUp 0.6s ease 0.6s both;
        }

        .wisdom-icon {
            font-size: 28px;
            margin-bottom: 15px;
        }

        .wisdom-label {
            color: #a0aec0;
            font-size: 11px;
            letter-spacing: 2px;
            text-transform: uppercase;
            margin-bottom: 15px;
        }

        .wisdom-quote {
            font-size: 16px;
            font-style: italic;
            color: #4a5568;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .wisdom-source {
            color: #a0aec0;
            font-size: 12px;
        }

        /* Attachment Overview - ä¼˜åŒ– */
        .attachment-overview {
            display: none;
            padding: 20px 24px 40px;
            animation: fadeIn 0.6s ease;
        }

        .overview-title {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
            animation: fadeInUp 0.6s ease;
        }

        .overview-desc {
            font-size: 14px;
            color: #718096;
            line-height: 1.6;
            margin-bottom: 30px;
            animation: fadeInUp 0.6s ease 0.1s both;
        }

        .style-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
            animation: slideInLeft 0.4s ease;
            animation-fill-mode: both;
        }

        .style-card:nth-child(1) { animation-delay: 0.2s; }
        .style-card:nth-child(2) { animation-delay: 0.3s; }
        .style-card:nth-child(3) { animation-delay: 0.4s; }
        .style-card:nth-child(4) { animation-delay: 0.5s; }

        .style-card:hover {
            transform: translateX(5px);
        }

        .style-card:active {
            transform: scale(0.98);
        }

        .style-card.green {
            background: linear-gradient(135deg, rgba(230, 245, 235, 0.95), rgba(220, 240, 230, 0.95));
        }

        .style-card.orange {
            background: linear-gradient(135deg, rgba(255, 240, 235, 0.95), rgba(255, 235, 230, 0.95));
        }

        .style-card.blue {
            background: linear-gradient(135deg, rgba(235, 245, 255, 0.95), rgba(230, 240, 255, 0.95));
        }

        .style-card.purple {
            background: linear-gradient(135deg, rgba(245, 235, 255, 0.95), rgba(240, 230, 255, 0.95));
        }

        .style-icon {
            font-size: 36px;
            margin-bottom: 15px;
        }

        .style-name {
            font-size: 20px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .style-desc {
            font-size: 14px;
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        /* Loading Animation - æ–°å¢ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }

        .loading-content {
            text-align: center;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(143, 168, 159, 0.2);
            border-top-color: #8fa89f;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 16px;
            color: #4a5568;
            margin-bottom: 10px;
        }

        .loading-subtext {
            font-size: 14px;
            color: #a0aec0;
        }

        /* Modal - æ–°å¢ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1001;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 30px 24px;
            max-width: 400px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            animation: slideInUp 0.4s ease;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-title {
            font-size: 22px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
        }

        .modal-desc {
            font-size: 15px;
            color: #4a5568;
            line-height: 1.7;
            margin-bottom: 25px;
        }

        .modal-buttons {
            display: flex;
            gap: 12px;
        }

        .modal-button {
            flex: 1;
            padding: 14px;
            border-radius: 20px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s ease;
        }

        .modal-button-primary {
            background: linear-gradient(135deg, #8fa89f, #a8b89f);
            color: white;
        }

        .modal-button-secondary {
            background: rgba(226, 232, 240, 0.5);
            color: #4a5568;
        }

        .modal-button:active {
            transform: scale(0.95);
        }

        /* Responsive */
        @media (max-width: 375px) {
            .main-title {
                font-size: 32px;
            }
            .question-title {
                font-size: 20px;
            }
            .attachment-name {
                font-size: 24px;
            }
        }

        @media (min-width: 768px) {
            .container {
                max-width: 600px;
                margin: 0 auto;
            }
        }

        /* Toast Notification - æ–°å¢ */
        .toast {
            position: fixed;
            bottom: -100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(45, 55, 72, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            z-index: 1002;
            transition: bottom 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 15px;
            max-width: 90%;
        }

        .toast.show {
            bottom: 30px;
        }

        .toast-icon {
            font-size: 20px;
        }

        /* Progress Indicator - æ–°å¢ */
        .question-progress {
            display: flex;
            justify-content: center;
            gap: 6px;
            margin: 25px 0;
            flex-wrap: wrap;
            padding: 0 20px;
        }

        .progress-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(160, 174, 192, 0.3);
            transition: all 0.3s ease;
        }

        .progress-dot.completed {
            background: linear-gradient(135deg, #8fa89f, #a8b89f);
            transform: scale(1.2);
        }

        .progress-dot.current {
            background: #c8b5d8;
            transform: scale(1.4);
            box-shadow: 0 0 10px rgba(200, 181, 216, 0.5);
        }

        /* Swipe Animation - æ–°å¢ */
        @keyframes swipeOut {
            to {
                opacity: 0;
                transform: translateX(-30px);
            }
        }

        @keyframes swipeIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .question-card.swipe-out {
            animation: swipeOut 0.3s ease forwards;
        }

        .question-card.swipe-in {
            animation: swipeIn 0.3s ease forwards;
        }

        /* Confetti Effect - æ–°å¢ */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: #f0f;
            position: absolute;
            animation: confetti-fall 3s linear forwards;
            z-index: 999;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        /* Percentage Circle - æ–°å¢ */
        .percentage-circle {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: conic-gradient(
                #8fa89f 0deg,
                #8fa89f var(--percentage),
                rgba(226, 232, 240, 0.3) var(--percentage),
                rgba(226, 232, 240, 0.3) 360deg
            );
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            position: relative;
            animation: rotate 2s ease-in-out;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .percentage-circle::before {
            content: '';
            position: absolute;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: white;
        }

        .percentage-text {
            position: relative;
            z-index: 1;
            font-size: 28px;
            font-weight: 700;
            color: #2d3748;
        }

        /* Comparison Chart - æ–°å¢ */
        .comparison-section {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            margin: 20px 0;
        }

        .comparison-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 20px;
            text-align: center;
        }

        .comparison-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(226, 232, 240, 0.5);
        }

        .comparison-item:last-child {
            border-bottom: none;
        }

        .comparison-label {
            font-size: 14px;
            color: #4a5568;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .comparison-bar-container {
            flex: 1;
            margin: 0 15px;
            height: 8px;
            background: rgba(226, 232, 240, 0.5);
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-bar {
            height: 100%;
            background: linear-gradient(90deg, #8fa89f, #a8b89f);
            border-radius: 10px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0;
        }

        .comparison-value {
            font-size: 14px;
            font-weight: 600;
            color: #718096;
            min-width: 45px;
            text-align: right;
        }

        /* Insight Cards - æ–°å¢ */
        .insights-section {
            margin: 20px 0;
        }

        .insight-card {
            background: linear-gradient(135deg, rgba(143, 168, 159, 0.08), rgba(168, 184, 159, 0.08));
            border-left: 4px solid #8fa89f;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            animation: slideInLeft 0.4s ease;
        }

        .insight-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .insight-icon {
            font-size: 24px;
        }

        .insight-title {
            font-size: 15px;
            font-weight: 600;
            color: #2d3748;
        }

        .insight-text {
            font-size: 14px;
            color: #4a5568;
            line-height: 1.6;
            padding-left: 34px;
        }

        /* Resources Section - æ–°å¢ */
        .resources-section {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            margin: 20px 0;
        }

        .resources-title {
            font-size: 16px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .resource-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .resource-item:hover {
            border-color: #a8b89f;
            transform: translateX(5px);
        }

        .resource-item:active {
            transform: scale(0.98);
        }

        .resource-name {
            font-size: 15px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .resource-desc {
            font-size: 13px;
            color: #718096;
            line-height: 1.5;
        }

        /* Quote Box - æ–°å¢ */
        .quote-box {
            background: linear-gradient(135deg, rgba(168, 181, 216, 0.1), rgba(200, 181, 216, 0.1));
            border-left: 4px solid #a8b5d8;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            font-style: italic;
        }

        .quote-text {
            font-size: 15px;
            color: #4a5568;
            line-height: 1.7;
            margin-bottom: 10px;
        }

        .quote-author {
            font-size: 13px;
            color: #718096;
            font-style: normal;
            font-weight: 600;
        }

        /* Journey Timeline - æ–°å¢ */
        .timeline {
            position: relative;
            padding: 20px 0;
            margin: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, #8fa89f, #a8b89f);
        }

        .timeline-item {
            position: relative;
            padding-left: 50px;
            margin-bottom: 30px;
        }

        .timeline-dot {
            position: absolute;
            left: 13px;
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            border: 3px solid #8fa89f;
            box-shadow: 0 0 0 4px rgba(143, 168, 159, 0.2);
        }

        .timeline-content {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 16px;
        }

        .timeline-title {
            font-size: 14px;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 8px;
        }

        .timeline-desc {
            font-size: 13px;
            color: #718096;
            line-height: 1.6;
        }

        /* Emoji Feedback - æ–°å¢ */
        .emoji-feedback {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .emoji-btn {
            font-size: 36px;
            cursor: pointer;
            transition: all 0.3s ease;
            filter: grayscale(1);
            opacity: 0.5;
        }

        .emoji-btn:hover {
            filter: grayscale(0);
            opacity: 1;
            transform: scale(1.2);
        }

        .emoji-btn.selected {
            filter: grayscale(0);
            opacity: 1;
            transform: scale(1.3);
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1.3); }
            50% { transform: scale(1.5); }
        }

        /* Stats Cards - æ–°å¢ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
        }

        .stat-icon {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 12px;
            color: #718096;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Accessibility */
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Dark Mode Support - æ–°å¢ */
        @media (prefers-color-scheme: dark) {
            body {
                background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            }
            
            .header {
                background: rgba(30, 30, 50, 0.8);
            }
            
            .logo, .main-title, .attachment-name, .question-title {
                color: #e2e8f0;
            }
            
            .subtitle, .question-desc, .attachment-desc {
                color: #a0aec0;
            }
            
            .question-card, .attachment-card, .style-card {
                background: rgba(30, 30, 50, 0.8);
            }
            
            .option {
                background: rgba(40, 40, 60, 0.8);
            }
        }

        /* Print Styles */
        @media print {
            .header, .nav-buttons, .action-buttons {
                display: none;
            }
            body {
                background: white;
            }
            .bg-circle {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="bg-circle bg-circle-1"></div>
    <div class="bg-circle bg-circle-2"></div>
    <div class="bg-circle bg-circle-3"></div>

    <div class="container">
        <!-- Header -->
        <div class="header" id="header">
            <div class="logo">
                <div class="logo-icon">ğŸŒ±</div>
                <span>PsycheFit</span>
            </div>
            <div class="settings-icon" onclick="showSettings()">âš™ï¸</div>
        </div>

        <!-- Welcome Screen -->
        <div class="welcome-screen" id="welcomeScreen">
            <div class="badge badge-pulse">
                <span>ğŸ’š</span>
                <span>10ä¸‡+ æ­£åœ¨å¯»æ‰¾å†…å¿ƒå¹³é™</span>
            </div>
            <h1 class="main-title">
                å‘ç°ä½ çš„<br>
                <span class="highlight">å†…åœ¨è¿æ¥</span>
            </h1>
            <p class="subtitle">
                æ¸©å’Œåœ°äº†è§£ä½ çš„ä¾æ‹é£æ ¼ã€‚æ²»æ„ˆå…³ç³»çš„é“è·¯ä»å†…å¿ƒå¼€å§‹ã€‚
            </p>
            <button class="start-button" onclick="startJourney()">
                å¼€å§‹æ—…ç¨‹
                <span>â†’</span>
            </button>
            <div class="time-info">
                <span>ğŸ•</span>
                <span>å¹³é™çš„5åˆ†é’Ÿ</span>
            </div>
            <div class="learn-more" onclick="showAttachmentOverview()">
                æ¢ç´¢ä¾æ‹ç†è®º
            </div>
        </div>

        <!-- Reflection Screen -->
        <div class="reflection-screen" id="reflectionScreen">
            <div class="reflection-icon">ğŸŒ¸</div>
            <h2 class="reflection-title">æ²»æ„ˆéœ€è¦æ—¶é—´...</h2>
            <p class="reflection-subtitle">æ»‹å…»ä½ çš„å†…å¿ƒèŠ±å›­ã€‚</p>
            
            <div class="growth-section">
                <div class="growth-label">æˆé•¿</div>
                <div class="growth-bar">
                    <div class="growth-fill"></div>
                </div>
            </div>

            <div class="wisdom-card">
                <div class="wisdom-icon">ğŸ§˜</div>
                <div class="wisdom-label">æ¯æ—¥æ™ºæ…§</div>
                <p class="wisdom-quote">
                    "å°±åƒè²èŠ±ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰èƒ½åŠ›ä»æ·¤æ³¥ä¸­å‡èµ·ï¼Œä»é»‘æš—ä¸­ç»½æ”¾ï¼Œå‘ä¸–ç•Œæ•£å‘å…‰èŠ’ã€‚"
                </p>
                <div class="wisdom-source">â€” æ­£å¿µæç¤º</div>
            </div>
        </div>

        <!-- Attachment Overview Screen -->
        <div class="attachment-overview" id="attachmentOverview">
            <h2 class="overview-title">ä¾æ‹é£æ ¼<br>ç ”ç©¶ä¸æ´å¯Ÿ</h2>
            <p class="overview-desc">
                æ¢ç´¢å¿ƒç†å­¦ç ”ç©¶è¯†åˆ«çš„å››ç§ä¸»è¦ä¾æ‹é£æ ¼ã€‚ç†è§£è¿™äº›æ¨¡å¼æ˜¯å»ºç«‹æ›´å¥åº·å…³ç³»çš„ç¬¬ä¸€æ­¥ã€‚
            </p>

            <div class="style-card green" onclick="showStyleDetail('secure')">
                <div class="style-icon">ğŸŒ±</div>
                <div class="attachment-badge badge-healthy">å¥åº·</div>
                <div class="style-name">å®‰å…¨å‹ä¾æ‹</div>
                <div class="style-desc">
                    ä»¥å¯¹äº²å¯†å…³ç³»å’Œç‹¬ç«‹æ€§çš„èˆ’é€‚æ„Ÿä¸ºç‰¹å¾ã€‚å®‰å…¨å‹ä¸ªä½“ä¿¡ä»»ä¼´ä¾£å¹¶æœ‰æ•ˆå¤„ç†å†²çªï¼Œä¿ƒè¿›ç¨³å®šå’Œæ¸©æš–ã€‚
                </div>
                <div class="read-more">é˜…è¯»å®Œæ•´æ¡£æ¡ˆ â†’</div>
            </div>

            <div class="style-card orange" onclick="showStyleDetail('anxious')">
                <div class="style-icon">ğŸ§¡</div>
                <div class="attachment-badge badge-anxious">å¯»æ±‚å®‰æ…°</div>
                <div class="style-name">ç„¦è™‘-çŸ›ç›¾å‹</div>
                <div class="style-desc">
                    é€šå¸¸ä»¥å¯¹è¢«æŠ›å¼ƒçš„æ·±å±‚ææƒ§ä¸ºç‰¹å¾ã€‚ä¸ªä½“å¯èƒ½å¯»æ±‚æŒç»­çš„ç¡®è®¤ï¼Œåœ¨ä¸ä¸ä¼´ä¾£å¯†åˆ‡æ¥è§¦æ—¶æ„Ÿåˆ°ä¸å®‰ã€‚
                </div>
                <div class="read-more">é˜…è¯»å®Œæ•´æ¡£æ¡ˆ â†’</div>
            </div>

            <div class="style-card blue" onclick="showStyleDetail('avoidant')">
                <div class="style-icon">ğŸ›¡ï¸</div>
                <div class="attachment-badge badge-avoidant">ç‹¬ç«‹</div>
                <div class="style-name">å›é¿-ç–ç¦»å‹</div>
                <div class="style-desc">
                    ä»¥å¼ºçƒˆçš„è‡ªç«‹æ„¿æœ›ä¸ºæ ‡å¿—ã€‚æƒ…æ„Ÿäº²å¯†å¯èƒ½è®©äººæ„Ÿåˆ°çª’æ¯ï¼Œå¯¼è‡´è¿™äº›ä¸ªä½“åœ¨å…³ç³»è¿‡äºäº²å¯†æ—¶é€€ç¼©ã€‚
                </div>
                <div class="read-more">é˜…è¯»å®Œæ•´æ¡£æ¡ˆ â†’</div>
            </div>

            <div class="style-card purple" onclick="showStyleDetail('fearful')">
                <div class="style-icon">ã€°ï¸</div>
                <div class="attachment-badge badge-fearful">å¤æ‚</div>
                <div class="style-name">ææƒ§-å›é¿å‹</div>
                <div class="style-desc">
                    ä¹Ÿç§°ä¸ºæ··ä¹±å‹ä¾æ‹ã€‚ä¸ªä½“æ¸´æœ›äº²å¯†ä½†å®³æ€•è¢«æ‹’ç»ï¼Œç»å¸¸åœ¨å¸å¼•ä¼´ä¾£å’Œæ¨å¼€ä¼´ä¾£ä¹‹é—´æ‘‡æ‘†ã€‚
                </div>
                <div class="read-more">é˜…è¯»å®Œæ•´æ¡£æ¡ˆ â†’</div>
            </div>

            <button class="start-button" style="width: 100%; margin-top: 20px;" onclick="backToWelcome()">
                å¼€å§‹è¯„ä¼° â†’
            </button>
        </div>

        <!-- Test Screen -->
        <div class="test-screen" id="testScreen">
            <div class="test-header">
                <div class="scenario-label">æƒ…æ™¯</div>
                <div class="scenario-number">ç¬¬<span id="currentQ">1</span>é¢˜ï¼Œå…±<span id="totalQ">20</span>é¢˜</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="question-progress" id="questionProgress"></div>
            </div>

            <div class="question-card">
                <div class="icon-circle" id="questionIcon">ğŸŒ±</div>
                <h2 class="question-title" id="questionTitle"></h2>
                <p class="question-desc" id="questionDesc"></p>
            </div>

            <div class="select-label">é€‰æ‹©ä¸€ä¸ªé€‰é¡¹</div>
            <div class="options" id="optionsContainer"></div>

            <div class="nav-buttons">
                <button class="nav-button btn-back" onclick="previousQuestion()">â† è¿”å›</button>
                <button class="nav-button btn-next" id="nextBtn" onclick="nextQuestion()" disabled>ä¸‹ä¸€æ­¥ â†’</button>
            </div>
        </div>

        <!-- Result Screen -->
        <div class="result-screen" id="resultScreen">
            <div class="result-header">
                <div class="result-title">ä½ çš„ä¾æ‹é£æ ¼</div>
            </div>

            <div id="resultContent"></div>

            <div class="action-buttons">
                <button class="share-button" onclick="shareResult()">ğŸ“Š åˆ†äº«</button>
                <button class="restart-button" onclick="restartTest()">ğŸ”„ é‡æµ‹</button>
            </div>

            <div class="wisdom-card">
                <div class="wisdom-icon">ğŸŒ¸</div>
                <div class="wisdom-label">æ¯æ—¥æ™ºæ…§</div>
                <p class="wisdom-quote">
                    "å°±åƒè²èŠ±ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰èƒ½åŠ›ä»æ·¤æ³¥ä¸­å‡èµ·ï¼Œä»é»‘æš—ä¸­ç»½æ”¾ï¼Œå‘ä¸–ç•Œæ•£å‘å…‰èŠ’ã€‚"
                </p>
                <div class="wisdom-source">â€” æ­£å¿µæç¤º</div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <div class="loading-text">æ­£åœ¨åˆ†æä½ çš„å›ç­”...</div>
            <div class="loading-subtext">å‘ç°ä½ çš„ä¾æ‹é£æ ¼</div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h3 class="modal-title" id="modalTitle"></h3>
            <p class="modal-desc" id="modalDesc"></p>
            <div class="modal-buttons">
                <button class="modal-button modal-button-secondary" onclick="closeModal()">å–æ¶ˆ</button>
                <button class="modal-button modal-button-primary" id="modalConfirm">ç¡®è®¤</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="toast-icon" id="toastIcon">âœ“</span>
        <span id="toastMessage">è¿›åº¦å·²ä¿å­˜</span>
    </div>

    <script>
        // Test questions data - ä½¿ç”¨å¤šç»´åº¦è¯„åˆ†ç³»ç»Ÿ
        // æ¯ä¸ªé€‰é¡¹å¯¹å››ç§ä¾æ‹ç±»å‹éƒ½æœ‰å½±å“åˆ†æ•°ï¼ˆ0-3åˆ†ï¼‰
        const questions = [
            {
                icon: 'ğŸ’¬',
                title: "ä½ çš„ä¼´ä¾£å‡ ä¸ªå°æ—¶æ²¡æœ‰å›å¤ã€‚",
                desc: "ä½ å‘é€äº†ä¸€æ¡é‡è¦ä¿¡æ¯ï¼Œä½†è¿˜æ²¡æœ‰æ”¶åˆ°å›å¤ã€‚",
                options: [
                    { 
                        title: "æ‹…å¿ƒå¹¶åˆ†æ", 
                        desc: "æˆ‘ä¸€ç›´åœ¨æŸ¥çœ‹æ‰‹æœºï¼Œæƒ³çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘è¯´é”™äº†ä»€ä¹ˆã€‚",
                        scores: { secure: 0, anxious: 3, avoidant: 0, fearful: 2 }
                    },
                    { 
                        title: "è€å¿ƒå¹¶ä¿¡ä»»", 
                        desc: "ä»–ä»¬å¯èƒ½å¾ˆå¿™ã€‚ç­‰ä»–ä»¬æœ‰ç©ºæ—¶æˆ‘ä¼šæ”¶åˆ°æ¶ˆæ¯çš„ã€‚",
                        scores: { secure: 3, anxious: 0, avoidant: 1, fearful: 0 }
                    },
                    { 
                        title: "ä¸ä»¥ä¸ºæ„", 
                        desc: "æˆ‘ä¸å¤ªåœ¨æ„ã€‚æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç”Ÿæ´»ã€‚",
                        scores: { secure: 1, anxious: 0, avoidant: 3, fearful: 1 }
                    },
                    { 
                        title: "å¤æ‚æ„Ÿå—", 
                        desc: "ä¸€æ–¹é¢æˆ‘æƒ³å†æ¬¡è”ç³»ï¼Œå¦ä¸€æ–¹é¢æˆ‘åˆæƒ³é€€ç¼©ã€‚",
                        scores: { secure: 0, anxious: 2, avoidant: 1, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'â¤ï¸',
                title: "ä½ çš„ä¼´ä¾£ç¬¬ä¸€æ¬¡è¯´'æˆ‘çˆ±ä½ 'ã€‚",
                desc: "åœ¨è¿™ä¸ªæ—¶åˆ»ä½ æœ‰ä»€ä¹ˆæ„Ÿå—å’Œå›åº”ï¼Ÿ",
                options: [
                    { 
                        title: "æ¸©æš–å¹¶å›åº”", 
                        desc: "æˆ‘æ·±å—æ„ŸåŠ¨ï¼Œå¦‚æœæˆ‘ä¹Ÿæœ‰åŒæ ·æ„Ÿå—ï¼Œè‡ªç„¶ä¼šå›åº”ã€‚",
                        scores: { secure: 3, anxious: 1, avoidant: 0, fearful: 0 }
                    },
                    { 
                        title: "æ¬£å–œè‹¥ç‹‚", 
                        desc: "ç»ˆäºç­‰åˆ°äº†ï¼æˆ‘ä¸€ç›´åœ¨ç­‰è¿™å¥è¯ã€‚æˆ‘æ„Ÿåˆ°å¦‚é‡Šé‡è´Ÿå’Œå¿«ä¹ã€‚",
                        scores: { secure: 1, anxious: 3, avoidant: 0, fearful: 1 }
                    },
                    { 
                        title: "æ„Ÿåˆ°ä¸é€‚", 
                        desc: "æˆ‘æ„Ÿåˆ°å°´å°¬ï¼Œä¸çŸ¥é“å¦‚ä½•å›åº”ã€‚æ„Ÿè§‰å¤ªæ—©äº†ã€‚",
                        scores: { secure: 0, anxious: 0, avoidant: 3, fearful: 2 }
                    },
                    { 
                        title: "å†…å¿ƒçŸ›ç›¾", 
                        desc: "æˆ‘æƒ³å›åº”ä½†åˆæ„Ÿåˆ°å®³æ€•ã€‚å¦‚æœè¿™æ”¹å˜äº†ä»€ä¹ˆæ€ä¹ˆåŠï¼Ÿ",
                        scores: { secure: 0, anxious: 2, avoidant: 1, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸ˜¢',
                title: "ä½ æ­£åœ¨ç»å†æƒ…æ„Ÿä¸Šçš„å›°éš¾æ—¶æœŸã€‚",
                desc: "ä½ å¦‚ä½•å¤„ç†ä¸ä¼´ä¾£åˆ†äº«ä½ çš„å›°æ‰°ï¼Ÿ",
                options: [
                    { 
                        title: "å¼€æ”¾å¹¶åˆ†äº«", 
                        desc: "æˆ‘ä¸»åŠ¨è”ç³»å¹¶åˆ†äº«æˆ‘çš„æ„Ÿå—ã€‚ä»–ä»¬çš„æ”¯æŒå¸®åŠ©äº†æˆ‘ã€‚",
                        scores: { secure: 3, anxious: 2, avoidant: 0, fearful: 0 }
                    },
                    { 
                        title: "å¯»æ±‚æŒç»­æ”¯æŒ", 
                        desc: "æˆ‘éœ€è¦ä»–ä»¬åœ¨æˆ‘èº«è¾¹ï¼Œé¢‘ç¹å¯»æ±‚ä»–ä»¬å…³å¿ƒæˆ‘çš„è¯æ˜ã€‚",
                        scores: { secure: 1, anxious: 3, avoidant: 0, fearful: 1 }
                    },
                    { 
                        title: "è‡ªåŠ›æ›´ç”Ÿ", 
                        desc: "æˆ‘æ›´æ„¿æ„è‡ªå·±å¤„ç†ã€‚æˆ‘ä¸å–œæ¬¢ç»™åˆ«äººæ·»éº»çƒ¦ã€‚",
                        scores: { secure: 1, anxious: 0, avoidant: 3, fearful: 1 }
                    },
                    { 
                        title: "æ¨æ‹‰è¡Œä¸º", 
                        desc: "æˆ‘æƒ³è¦æ”¯æŒï¼Œä½†å½“ä»–ä»¬é è¿‘æ—¶ï¼Œæˆ‘æ„Ÿåˆ°çª’æ¯å¹¶é€€ç¼©ã€‚",
                        scores: { secure: 0, anxious: 1, avoidant: 2, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸŒ™',
                title: "ä½ çš„ä¼´ä¾£éœ€è¦å‡ å¤©çš„ç©ºé—´ã€‚",
                desc: "ä»–ä»¬å‘Šè¯‰ä½ éœ€è¦ä¸€äº›ç‹¬å¤„æ—¶é—´æ¥å……ç”µã€‚",
                options: [
                    { 
                        title: "ç†è§£", 
                        desc: "æˆ‘å°Šé‡ä»–ä»¬éœ€è¦ç©ºé—´ï¼Œå¹¶åˆ©ç”¨è¿™æ®µæ—¶é—´åšè‡ªå·±çš„äº‹ã€‚",
                        scores: { secure: 3, anxious: 0, avoidant: 2, fearful: 0 }
                    },
                    { 
                        title: "ç„¦è™‘å¹¶å—ä¼¤", 
                        desc: "æˆ‘æ„Ÿåˆ°è¢«æ‹’ç»ï¼Œæ‹…å¿ƒè¿™æ„å‘³ç€ä»–ä»¬å¯¹æˆ‘å¤±å»å…´è¶£ã€‚",
                        scores: { secure: 0, anxious: 3, avoidant: 0, fearful: 2 }
                    },
                    { 
                        title: "æ„Ÿåˆ°å®½æ…°", 
                        desc: "å®é™…ä¸Šï¼Œæˆ‘æ¬¢è¿è¿™æ ·åšã€‚æˆ‘æœ€è¿‘æ„Ÿè§‰æœ‰ç‚¹æ‹¥æŒ¤ã€‚",
                        scores: { secure: 1, anxious: 0, avoidant: 3, fearful: 0 }
                    },
                    { 
                        title: "å›°æƒ‘", 
                        desc: "æˆ‘è¯´æ²¡å…³ç³»ï¼Œä½†å†…å¿ƒæ‹…å¿ƒï¼Œç„¶ååˆä¸ºä»–ä»¬ç¦»å¼€æ„Ÿåˆ°å®½æ…°ã€‚",
                        scores: { secure: 0, anxious: 1, avoidant: 1, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸ—£ï¸',
                title: "åœ¨åˆ†æ­§ä¸­ï¼Œä½ é€šå¸¸...",
                desc: "æƒ³æƒ³ä½ è‡ªç„¶åœ°å¦‚ä½•å›åº”å†²çªã€‚",
                options: [
                    { 
                        title: "ç•™ä¸‹å¹¶è®¨è®º", 
                        desc: "æˆ‘ä¿æŒå†·é™å¹¶è§£å†³é—®é¢˜ã€‚å†²çªæ˜¯å…³ç³»ä¸­çš„æ­£å¸¸éƒ¨åˆ†ã€‚",
                        scores: { secure: 3, anxious: 1, avoidant: 0, fearful: 0 }
                    },
                    { 
                        title: "è¿½æ±‚è§£å†³", 
                        desc: "æˆ‘éœ€è¦ç«‹å³è§£å†³ã€‚æˆ‘æ— æ³•å¿å—æˆ‘ä»¬ä¹‹é—´çš„ç´§å¼ æ„Ÿã€‚",
                        scores: { secure: 1, anxious: 3, avoidant: 0, fearful: 1 }
                    },
                    { 
                        title: "é€€ç¼©", 
                        desc: "æˆ‘éœ€è¦ç©ºé—´å†·é™ä¸‹æ¥ã€‚æˆ‘å…³é—­æˆ–ç¦»å¼€å¯¹è¯ã€‚",
                        scores: { secure: 0, anxious: 0, avoidant: 3, fearful: 1 }
                    },
                    { 
                        title: "æƒ…ç»ªæ³¢åŠ¨", 
                        desc: "æˆ‘çš„æƒ…ç»ªèµ·ä¼â€”â€”æœ‰æ—¶æˆ‘æ¿€çƒˆè¿½æ±‚ï¼Œæœ‰æ—¶æˆ‘é€€ç¼©ã€‚",
                        scores: { secure: 0, anxious: 2, avoidant: 1, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸ ',
                title: "ä½ çš„ä¼´ä¾£å»ºè®®åŒå±…ã€‚",
                desc: "ä½ å¯¹è¿ˆå‡ºè¿™ä¸€æ­¥æœ‰ä»€ä¹ˆæ„Ÿå—ï¼Ÿ",
                options: [
                    { 
                        title: "å…´å¥‹å¹¶å‡†å¤‡", 
                        desc: "å¦‚æœæ—¶æœºåˆé€‚ï¼Œæˆ‘å¾ˆå…´å¥‹èƒ½åŠ æ·±æˆ‘ä»¬çš„æ‰¿è¯ºã€‚",
                        scores: { secure: 3, anxious: 2, avoidant: 0, fearful: 0 }
                    },
                    { 
                        title: "ç»ˆäºç­‰åˆ°äº†ï¼", 
                        desc: "æ˜¯çš„ï¼è¿™å°±æ˜¯æˆ‘ä¸€ç›´åœ¨ç­‰çš„â€”â€”ä»–ä»¬æ‰¿è¯ºçš„è¯æ˜ã€‚",
                        scores: { secure: 1, anxious: 3, avoidant: 0, fearful: 0 }
                    },
                    { 
                        title: "çŠ¹è±«", 
                        desc: "æˆ‘æ‹…å¿ƒå¤±å»ç‹¬ç«‹æ€§å’Œä¸ªäººç©ºé—´ã€‚",
                        scores: { secure: 1, anxious: 0, avoidant: 3, fearful: 2 }
                    },
                    { 
                        title: "ææƒ§", 
                        desc: "æˆ‘æƒ³è¦äº²å¯†ï¼Œä½†è¢«å›°ä½çš„æƒ³æ³•è®©æˆ‘æ·±æ„Ÿææƒ§ã€‚",
                        scores: { secure: 0, anxious: 1, avoidant: 2, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸ‘¥',
                title: "ä½ çš„ä¼´ä¾£æœ‰ä¸€ä¸ªä½ æ²¡è§è¿‡çš„å¯†å‹ã€‚",
                desc: "ä»–ä»¬ç»å¸¸ä¸è¿™ä¸ªæœ‹å‹ç›¸å¤„ã€‚",
                options: [
                    { 
                        title: "èˆ’é€‚", 
                        desc: "æˆ‘å¾ˆé«˜å…´ä»–ä»¬æœ‰äº²å¯†çš„å‹è°Šã€‚æ‹¥æœ‰ç‹¬ç«‹çš„ç¤¾äº¤ç”Ÿæ´»æ˜¯å¥åº·çš„ã€‚",
                        scores: { secure: 3, anxious: 0, avoidant: 2, fearful: 0 }
                    },
                    { 
                        title: "å«‰å¦’å¹¶å¥½å¥‡", 
                        desc: "æˆ‘æ„Ÿåˆ°è¢«æ’é™¤åœ¨å¤–ï¼Œæƒ³äº†è§£è¿™ä¸ªæœ‹å‹çš„ä¸€åˆ‡ã€‚",
                        scores: { secure: 0, anxious: 3, avoidant: 0, fearful: 2 }
                    },
                    { 
                        title: "æ¼ ä¸å…³å¿ƒ", 
                        desc: "æˆ‘ä¸å¤ªåœ¨æ„ã€‚ä»–ä»¬çš„å‹è°Šæ˜¯ä»–ä»¬çš„äº‹ã€‚",
                        scores: { secure: 1, anxious: 0, avoidant: 3, fearful: 1 }
                    },
                    { 
                        title: "æ€€ç–‘", 
                        desc: "æˆ‘ä¸€éƒ¨åˆ†æ„Ÿåˆ°å—å¨èƒï¼Œä½†ä¸æƒ³é€šè¿‡è¯¢é—®æ˜¾å¾—æœ‰éœ€æ±‚ã€‚",
                        scores: { secure: 0, anxious: 2, avoidant: 1, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸ‰',
                title: "ä½ çš„ä¼´ä¾£åœ¨æ²¡æœ‰ä½ çš„æƒ…å†µä¸‹å–å¾—äº†é‡å¤§æˆå°±ã€‚",
                desc: "ä»–ä»¬ç‹¬ç«‹è¾¾æˆäº†ä¸€ä¸ªé‡è¦ç›®æ ‡ã€‚",
                options: [
                    { 
                        title: "çœŸå¿ƒé«˜å…´", 
                        desc: "æˆ‘ä¸ºä»–ä»¬æ„Ÿåˆ°éª„å‚²ï¼æˆ‘æƒ³ä¸€èµ·åº†ç¥ä»–ä»¬çš„æˆåŠŸã€‚",
                        scores: { secure: 3, anxious: 1, avoidant: 1, fearful: 0 }
                    },
                    { 
                        title: "æ„Ÿåˆ°è¢«æ’é™¤", 
                        desc: "æˆ‘æ„Ÿåˆ°è¢«æ’é™¤åœ¨å¤–ï¼Œæƒ³çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘æ²¡æœ‰å‚ä¸è¿™ä¸ªæˆå°±ã€‚",
                        scores: { secure: 0, anxious: 3, avoidant: 0, fearful: 2 }
                    },
                    { 
                        title: "æ”¯æŒä½†ç–è¿œ", 
                        desc: "æˆ‘ç¥è´ºä»–ä»¬ï¼Œä½†è§‰å¾—ä¸éœ€è¦è¿‡åº¦å‚ä¸ã€‚",
                        scores: { secure: 2, anxious: 0, avoidant: 3, fearful: 0 }
                    },
                    { 
                        title: "æ„Ÿåˆ°å—å¨èƒ", 
                        desc: "æˆ‘æ‹…å¿ƒä»–ä»¬çš„æˆåŠŸä¼šæ”¹å˜æˆ‘ä»¬çš„å…³ç³»åŠ¨æ€ï¼Œæˆ–è€…ä»–ä»¬ä¼šæ›´å°‘éœ€è¦æˆ‘ã€‚",
                        scores: { secure: 0, anxious: 2, avoidant: 1, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸ’­',
                title: "å½“ä½ å›æƒ³è¿‡å»çš„å…³ç³»æ—¶...",
                desc: "ä½ é€šå¸¸å¦‚ä½•åæ€ä»¥å‰çš„ä¼´ä¾£ï¼Ÿ",
                options: [
                    { 
                        title: "å­¦ä¹ ç»å†", 
                        desc: "æˆ‘çœ‹åˆ°å¥½çš„å’Œåçš„æ–¹é¢ã€‚æ¯æ®µå…³ç³»éƒ½æ•™ä¼šäº†æˆ‘å®è´µçš„ä¸œè¥¿ã€‚",
                        scores: { secure: 3, anxious: 1, avoidant: 1, fearful: 0 }
                    },
                    { 
                        title: "è‡ªæˆ‘è´£å¤‡", 
                        desc: "æˆ‘ç»å¸¸æƒ³çŸ¥é“æˆ‘åšé”™äº†ä»€ä¹ˆï¼Œä»¥åŠæˆ‘å¦‚ä½•èƒ½è®©å…³ç³»æˆåŠŸã€‚",
                        scores: { secure: 0, anxious: 3, avoidant: 0, fearful: 2 }
                    },
                    { 
                        title: "ä¸å±‘ä¸€é¡¾", 
                        desc: "æˆ‘ä¸å¤ªæƒ³ä»–ä»¬ã€‚ä»–ä»¬å¯¹æˆ‘æ¥è¯´å¹¶ä¸é‡è¦ã€‚",
                        scores: { secure: 0, anxious: 0, avoidant: 3, fearful: 1 }
                    },
                    { 
                        title: "å¤æ‚æ„Ÿå—", 
                        desc: "æˆ‘åœ¨ç†æƒ³åŒ–ä»–ä»¬å’Œè§‰å¾—ä»–ä»¬ä¸é€‚åˆæˆ‘ä¹‹é—´æ‘‡æ‘†ã€‚",
                        scores: { secure: 0, anxious: 1, avoidant: 1, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸ“±',
                title: "ä½ æ›´å–œæ¬¢ä¸ä¼´ä¾£æ²Ÿé€šçš„é¢‘ç‡ï¼Ÿ",
                desc: "æƒ³æƒ³ä½ ç†æƒ³çš„æ—¥å¸¸è”ç³»ç¨‹åº¦ã€‚",
                options: [
                    { 
                        title: "å¹³è¡¡", 
                        desc: "å®šæœŸè”ç³»æ„Ÿè§‰å¾ˆå¥½ï¼Œä½†æˆ‘ä¹Ÿé‡è§†æ²¡æœ‰è”ç³»çš„ç‹¬å¤„æ—¶é—´ã€‚",
                        scores: { secure: 3, anxious: 1, avoidant: 1, fearful: 0 }
                    },
                    { 
                        title: "é¢‘ç¹", 
                        desc: "æˆ‘å–œæ¬¢æ•´å¤©ä¿æŒè”ç³»ã€‚è¿™è®©æˆ‘æ„Ÿåˆ°è¿æ¥ã€‚",
                        scores: { secure: 1, anxious: 3, avoidant: 0, fearful: 1 }
                    },
                    { 
                        title: "æœ€å°‘", 
                        desc: "æˆ‘æ›´å–œæ¬¢è¾ƒå°‘çš„è”ç³»ã€‚è¿‡å¤šçš„æ²Ÿé€šè®©äººæ„Ÿåˆ°çª’æ¯ã€‚",
                        scores: { secure: 1, anxious: 0, avoidant: 3, fearful: 1 }
                    },
                    { 
                        title: "ä¸ä¸€è‡´", 
                        desc: "æœ‰æ—¶æˆ‘æƒ³è¦æŒç»­è”ç³»ï¼Œæœ‰æ—¶æˆ‘éœ€è¦å®Œå…¨çš„ç©ºé—´ã€‚",
                        scores: { secure: 0, anxious: 2, avoidant: 1, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸ’',
                title: "ä½ çš„ä¼´ä¾£è®¡åˆ’äº†ä¸€ä¸ªæµªæ¼«æƒŠå–œã€‚",
                desc: "ä»–ä»¬ä¸ºä½ ç²¾å¿ƒå®‰æ’äº†ç‰¹åˆ«çš„äº‹æƒ…ã€‚",
                options: [
                    { 
                        title: "æ„ŸåŠ¨å¹¶æ„Ÿæ¿€", 
                        desc: "æˆ‘æ„Ÿåˆ°è¢«çˆ±å’Œè¢«æ¬£èµã€‚æˆ‘å–œæ¬¢å…¶ä¸­çš„ç”¨å¿ƒã€‚",
                        scores: { secure: 3, anxious: 2, avoidant: 0, fearful: 0 }
                    },
                    { 
                        title: "æ¬£å–œè‹¥ç‹‚", 
                        desc: "è¿™å¯¹æˆ‘æ„ä¹‰é‡å¤§ï¼è¿™è¯æ˜ä»–ä»¬çœŸçš„å…³å¿ƒæˆ‘ã€‚",
                        scores: { secure: 1, anxious: 3, avoidant: 0, fearful: 1 }
                    },
                    { 
                        title: "æ„Ÿåˆ°ä¸é€‚", 
                        desc: "æˆ‘æ¬£èµè¿™ä»½åŠªåŠ›ï¼Œä½†è¿™ç§ç¨‹åº¦çš„å…³æ³¨è®©æˆ‘æ„Ÿåˆ°å°´å°¬ã€‚",
                        scores: { secure: 1, anxious: 0, avoidant: 3, fearful: 2 }
                    },
                    { 
                        title: "æ€€ç–‘å¹¶æ»¡æ„", 
                        desc: "æˆ‘å¾ˆé«˜å…´ï¼Œä½†ä¹Ÿæƒ³çŸ¥é“æ˜¯ä»€ä¹ˆä¿ƒä½¿äº†è¿™ä¸ªä¸¾åŠ¨ã€‚ä¸€åˆ‡éƒ½å¥½å—ï¼Ÿ",
                        scores: { secure: 0, anxious: 2, avoidant: 1, fearful: 3 }
                    }
                ]
            },
            {
                icon: 'ğŸ”®',
                title: "å½“ä½ æƒ³è±¡ä½ ä»¬å…³ç³»çš„æœªæ¥æ—¶...",
                desc: "ä½ å¯¹é•¿æœŸæ‰¿è¯ºæœ‰ä»€ä¹ˆæ„Ÿå—ï¼Ÿ",
                options: [
                    { 
                        title: "ä¹è§‚", 
                        desc: "æˆ‘å¯¹å…±åŒå»ºè®¾æœªæ¥æ„Ÿåˆ°è‡ªä¿¡å’Œå…´å¥‹ã€‚",
                        scores: { secure: 3, anxious: 1, avoidant: 0, fearful: 0 }
                    },
                    { 
                        title: "æ¸´æœ›ç¡®å®šæ€§", 
                        desc: "æˆ‘éœ€è¦æŒç»­çš„ä¿è¯ï¼Œç¡®ä¿æˆ‘ä»¬æœ‰ä¸€ä¸ªç¨³å›ºçš„æœªæ¥ã€‚",
                        scores: { secure: 0, anxious: 3, avoidant: 0, fearful: 2 }
                    },
                    { 
                        title: "ä¸æƒ³è€ƒè™‘", 
                        desc: "æˆ‘ä¸“æ³¨äºå½“ä¸‹ã€‚æƒ³å¾—å¤ªè¿œè®©äººæ„Ÿåˆ°æŸç¼šã€‚",
                        scores: { secure: 1, anxious: 0, avoidant: 3, fearful: 1 }
                    },
                    { 
                        title: "å†…å¿ƒæåº¦çŸ›ç›¾", 
                        desc: "æˆ‘æƒ³è¦æ‰¿è¯ºï¼Œä½†è¿™ä¸ªæƒ³æ³•ä¹Ÿè®©æˆ‘ææƒ§ã€‚æˆ‘æ„Ÿåˆ°è¢«å›°ä½äº†ã€‚",
                        scores: { secure: 0, anxious: 1, avoidant: 2, fearful: 3 }
                    }
                ]
            }
        ];

        // Detailed attachment information
        const attachmentDetails = {
            secure: {
                badge: 'badge-healthy',
                badgeText: "å¥åº·",
                name: "å®‰å…¨å‹ä¾æ‹",
                desc: "ä½ å·²ç»å‘å±•å‡ºå®‰å…¨å‹ä¾æ‹é£æ ¼ï¼Œå…¶ç‰¹å¾æ˜¯å¯¹äº²å¯†å…³ç³»å’Œç‹¬ç«‹æ€§éƒ½æ„Ÿåˆ°èˆ’é€‚ã€‚ä½ ä¿¡ä»»ä¼´ä¾£ï¼Œæœ‰æ•ˆæ²Ÿé€šï¼Œå¹¶ä»¥æƒ…æ„Ÿæˆç†Ÿçš„æ–¹å¼å¤„ç†å†²çªã€‚è¿™ç§å¥åº·çš„æ¨¡å¼è®©ä½ èƒ½å¤Ÿä¿æŒç¨³å®šã€æ¸©æš–çš„å…³ç³»ï¼ŒåŒæ—¶ä¿æŒè‡ªæˆ‘æ„è¯†ã€‚",
                characteristics: [
                    { icon: "ğŸ’š", text: "å¯¹äº²å¯†å…³ç³»å’Œäº²å¯†æ„Ÿæ„Ÿåˆ°èˆ’é€‚" },
                    { icon: "ğŸŒŸ", text: "é«˜è‡ªå°Šå’Œç§¯æçœ‹å¾…ä»–äºº" },
                    { icon: "ğŸ—£ï¸", text: "åœ¨å†²çªä¸­æœ‰æ•ˆæ²Ÿé€š" },
                    { icon: "ğŸ¤", text: "ç‹¬ç«‹éœ€æ±‚å’Œç›¸å¤„éœ€æ±‚çš„å¹³è¡¡" },
                    { icon: "ğŸ˜Œ", text: "å¯¹å…³ç³»å’Œä¼´ä¾£çš„ä¿¡ä»»" }
                ],
                tips: [
                    {
                        title: "ä¿æŒä½ çš„åŸºç¡€",
                        desc: "ç»§ç»­ç»ƒä¹ å¼€æ”¾æ²Ÿé€šå’Œæƒ…æ„Ÿè¯šå®ã€‚ä½ çš„å®‰å…¨åŸºç¡€å¯¹ä½ å’Œä¼´ä¾£éƒ½æœ‰ç›Šã€‚"
                    },
                    {
                        title: "æ”¯æŒä»–äºº",
                        desc: "åˆ©ç”¨ä½ çš„æƒ…æ„Ÿç¨³å®šæ€§å¸®åŠ©ä¸åŒä¾æ‹é£æ ¼çš„ä¼´ä¾£åœ¨å…³ç³»ä¸­æ„Ÿåˆ°æ›´å®‰å…¨ã€‚"
                    },
                    {
                        title: "ä¿æŒè‡ªæˆ‘æ„è¯†",
                        desc: "å³ä½¿æ˜¯å®‰å…¨å‹ä¸ªä½“åœ¨å‹åŠ›ä¸‹ä¹Ÿå¯èƒ½é™·å…¥ä¸å®‰å…¨æ¨¡å¼ã€‚å®šæœŸè‡ªæˆ‘åæ€è®©ä½ ä¿æŒç¨³å®šã€‚"
                    }
                ]
            },
            anxious: {
                badge: 'badge-anxious',
                badgeText: "å¯»æ±‚å®‰æ…°",
                name: "ç„¦è™‘-çŸ›ç›¾å‹",
                desc: "ä½ ä½“éªŒåˆ°ç„¦è™‘-çŸ›ç›¾å‹ä¾æ‹é£æ ¼ï¼Œå…¶ç‰¹å¾æ˜¯å¯¹äº²å¯†å…³ç³»çš„å¼ºçƒˆæ¸´æœ›ä¸å¯¹å…³ç³»çš„æ‹…å¿§ç›¸ç»“åˆã€‚ä½ å¯èƒ½å¯»æ±‚é¢‘ç¹çš„ç¡®è®¤ï¼Œåœ¨ä¼´ä¾£ä¸åœ¨èº«è¾¹æ—¶æ„Ÿåˆ°ä¸å®‰ã€‚è¿™ç§æ¨¡å¼é€šå¸¸æºäºæ—©æœŸå…³ç³»ä¸­ä¸ä¸€è‡´çš„ç…§é¡¾ï¼Œä½†æ„è¯†æ˜¯æ²»æ„ˆçš„ç¬¬ä¸€æ­¥ã€‚",
                characteristics: [
                    { icon: "ğŸ’­", text: "é¢‘ç¹æ‹…å¿ƒä¼´ä¾£çš„æ„Ÿå—å’Œæ‰¿è¯º" },
                    { icon: "ğŸ”", text: "å¯¹å…³ç³»çº¿ç´¢å’Œå˜åŒ–çš„é«˜åº¦æ•æ„Ÿæ€§" },
                    { icon: "ğŸ’¬", text: "éœ€è¦é¢‘ç¹æ²Ÿé€šå’Œç¡®è®¤" },
                    { icon: "ğŸ˜°", text: "å®³æ€•è¢«æŠ›å¼ƒæˆ–æ‹’ç»" },
                    { icon: "â¤ï¸", text: "å¯¹äº²å¯†å…³ç³»å’Œäº²å¯†æ„Ÿçš„å¼ºçƒˆæ¸´æœ›" }
                ],
                tips: [
                    {
                        title: "åŸ¹å…»è‡ªæˆ‘å®‰æŠšæŠ€èƒ½",
                        desc: "å‘å±•å†¥æƒ³ã€å†™æ—¥è®°æˆ–å‘¼å¸ç»ƒä¹ ç­‰æŠ€èƒ½æ¥ç®¡ç†ç„¦è™‘ï¼Œè€Œä¸æ˜¯å¯»æ±‚å³æ—¶çš„å¤–éƒ¨ç¡®è®¤ã€‚"
                    },
                    {
                        title: "æŒ‘æˆ˜ç„¦è™‘æƒ³æ³•",
                        desc: "å½“æ‹…å¿§å‡ºç°æ—¶ï¼Œé—®è‡ªå·±ï¼š'è¿™ä¸ªæƒ³æ³•æ˜¯åŸºäºäº‹å®è¿˜æ˜¯ææƒ§ï¼Ÿ'å­¦ä¼šåŒºåˆ†ä¸¤è€…å¯ä»¥å‡å°‘ä¸å¿…è¦çš„ç—›è‹¦ã€‚"
                    },
                    {
                        title: "æ¸…æ™°è¡¨è¾¾éœ€æ±‚",
                        desc: "ç›´æ¥è¡¨è¾¾ä½ çš„éœ€æ±‚ï¼Œè€Œä¸æ˜¯å¸Œæœ›ä¼´ä¾£çŒœæµ‹ã€‚æ¸…æ™°çš„æ²Ÿé€šå‡å°‘è¯¯è§£å¹¶å»ºç«‹ä¿¡ä»»ã€‚"
                    },
                    {
                        title: "å‘å±•ç‹¬ç«‹æ€§",
                        desc: "æŠ•èµ„äºçˆ±å¥½ã€å‹è°Šå’Œä¸ªäººç›®æ ‡ã€‚å…³ç³»ä¹‹å¤–çš„å……å®ç”Ÿæ´»å‡å°‘ç„¦è™‘å¹¶å¢åŠ ä¿¡å¿ƒã€‚"
                    }
                ]
            },
            avoidant: {
                badge: 'badge-avoidant',
                badgeText: "ç‹¬ç«‹",
                name: "å›é¿-ç–ç¦»å‹",
                desc: "ä½ è¡¨ç°å‡ºå›é¿-ç–ç¦»å‹ä¾æ‹é£æ ¼ï¼Œä»¥å¯¹ç‹¬ç«‹å’Œè‡ªç«‹çš„å¼ºçƒˆåå¥½ä¸ºæ ‡å¿—ã€‚è™½ç„¶ä½ é‡è§†å…³ç³»ï¼Œä½†æƒ…æ„Ÿäº²å¯†å¯èƒ½è®©äººæ„Ÿåˆ°ä¸é€‚æˆ–çª’æ¯ã€‚å½“äº‹æƒ…å˜å¾—è¿‡äºäº²å¯†æ—¶ï¼Œä½ å¯èƒ½ä¼šé€€ç¼©ã€‚è¿™ç§æ¨¡å¼é€šå¸¸ä½œä¸ºä¸€ç§ä¿æŠ¤æœºåˆ¶å‘å±•ï¼Œä½†é€šè¿‡æ„è¯†å¯ä»¥è·å¾—æ›´æ·±çš„æƒ…æ„Ÿè¿æ¥ã€‚",
                characteristics: [
                    { icon: "ğŸ›¡ï¸", text: "å¼ºè°ƒç‹¬ç«‹å’Œè‡ªç»™è‡ªè¶³" },
                    { icon: "ğŸ˜", text: "å¯¹æ·±å±‚æ¬¡æƒ…æ„Ÿäº²å¯†çš„ä¸é€‚æ„Ÿ" },
                    { icon: "ğŸš¶", text: "å½“å…³ç³»å˜å¾—æ¿€çƒˆæ—¶é€€ç¼©çš„å€¾å‘" },
                    { icon: "ğŸ¤", text: "è¡¨è¾¾æƒ…æ„Ÿæˆ–éœ€æ±‚çš„å›°éš¾" },
                    { icon: "ğŸ’­", text: "å°†æƒ…æ„Ÿè·ç¦»ä½œä¸ºä¿æŠ¤çš„åå¥½" }
                ],
                tips: [
                    {
                        title: "ç»ƒä¹ è„†å¼±æ€§",
                        desc: "ä»å°äº‹å¼€å§‹ï¼Œä¸ä¿¡ä»»çš„äººåˆ†äº«æ„Ÿå—ã€‚è„†å¼±æ€§å»ºç«‹æ›´æ·±çš„è¿æ¥ï¼Œä¸ä¼šå‰Šå¼±ä½ çš„åŠ›é‡ã€‚"
                    },
                    {
                        title: "è¯†åˆ«é€€ç¼©æ¨¡å¼",
                        desc: "æ³¨æ„ä½ ä½•æ—¶é€€ç¼©å¹¶é—®è‡ªå·±ä½ åœ¨æ„Ÿå—ä»€ä¹ˆã€‚ç†è§£è§¦å‘å› ç´ å¸®åŠ©ä½ å›åº”è€Œä¸æ˜¯è‡ªåŠ¨ååº”ã€‚"
                    },
                    {
                        title: "æŒ‘æˆ˜ç‹¬ç«‹ä¿¡å¿µ",
                        desc: "éœ€è¦ä»–äººä¸æ˜¯å¼±ç‚¹â€”â€”è¿™æ˜¯äººæ€§ã€‚å®¡è§†å°†äº²å¯†ç­‰åŒäºå¤±å»è‡ªä¸»æƒçš„ä¿¡å¿µã€‚"
                    },
                    {
                        title: "è®¾å®šå¥åº·è¾¹ç•Œ",
                        desc: "ä½ å¯ä»¥åœ¨ä¸ä»–äººäº²å¯†çš„åŒæ—¶ä¿æŒç‹¬ç«‹ã€‚æ¸…æ™°åœ°æ²Ÿé€šä½ å¯¹ç©ºé—´çš„éœ€æ±‚ï¼Œè€Œä¸æ˜¯åˆ¶é€ è·ç¦»ã€‚"
                    }
                ]
            },
            fearful: {
                badge: 'badge-fearful',
                badgeText: "å¤æ‚",
                name: "ææƒ§-å›é¿å‹",
                desc: "ä½ ä½“éªŒåˆ°ææƒ§-å›é¿å‹ï¼ˆæ··ä¹±å‹ï¼‰ä¾æ‹é£æ ¼ï¼Œå…¶ç‰¹å¾æ˜¯å¯¹äº²å¯†å’Œè·ç¦»éƒ½æœ‰çŸ›ç›¾çš„æ¸´æœ›ã€‚ä½ å¯èƒ½æ¸´æœ›äº²å¯†åŒæ—¶åˆå®³æ€•äº²å¯†ï¼Œå¯¼è‡´å…³ç³»ä¸­çš„æ¨æ‹‰åŠ¨æ€ã€‚è¿™ç§å¤æ‚çš„æ¨¡å¼é€šå¸¸æºäºè¿‡å»çš„å…³ç³»åˆ›ä¼¤ï¼Œä½†æ²»æ„ˆå’Œå®‰å…¨ä¾æ‹æ˜¯å¯ä»¥å®ç°çš„ã€‚",
                characteristics: [
                    { icon: "ã€°ï¸", text: "å¯¹äº²å¯†å…³ç³»åŒæ—¶æ¸´æœ›å’Œææƒ§" },
                    { icon: "ğŸ”„", text: "åœ¨å¯»æ±‚äº²å¯†å’Œæ¨å¼€ä¹‹é—´æ‘‡æ‘†" },
                    { icon: "ğŸ˜Ÿ", text: "å¯¹è¢«æŠ›å¼ƒå’Œè¢«åæ²¡çš„é«˜åº¦ç„¦è™‘" },
                    { icon: "ğŸ’”", text: "ä¿¡ä»»ä»–äººå’Œè‡ªå·±çš„å›°éš¾" },
                    { icon: "ğŸ˜•", text: "å…³ç³»ä¸­çš„æ··åˆæˆ–æ··ä¹±ä¿¡å·" }
                ],
                tips: [
                    {
                        title: "å¯»æ±‚ä¸“ä¸šæ”¯æŒ",
                        desc: "ä¸æ¥å—è¿‡ä¾æ‹è®­ç»ƒçš„æ²»ç–—å¸ˆåˆä½œå¯ä»¥å¸®åŠ©ä½ å¤„ç†è¿‡å»çš„ç»éªŒå¹¶å‘å±•æ›´å¥åº·çš„å…³ç³»æ¨¡å¼ã€‚"
                    },
                    {
                        title: "è¯†åˆ«ä½ çš„æ¨¡å¼",
                        desc: "æ³¨æ„ä½ ä½•æ—¶æ¨å¼€æŸäººæˆ–æ‹‰è¿‘ä»–ä»¬ã€‚å¯¹è¿™äº›å¾ªç¯çš„æ„è¯†å¯¹æ”¹å˜è‡³å…³é‡è¦ã€‚"
                    },
                    {
                        title: "ç»ƒä¹ è‡ªæˆ‘åŒæƒ…",
                        desc: "ä½ çš„ä¾æ‹é£æ ¼æ˜¯ä½œä¸ºä¸€ç§ä¿æŠ¤è€Œå‘å±•çš„ã€‚åœ¨ä½ åŠªåŠ›å®ç°å®‰å…¨ä¾æ‹æ—¶ï¼Œè¦å¯¹è‡ªå·±æ¸©æŸ”ã€‚"
                    },
                    {
                        title: "æ²Ÿé€šå†…åœ¨å†²çª",
                        desc: "ä¸ä¿¡ä»»çš„ä¼´ä¾£åˆ†äº«ä½ çš„å¤æ‚æ„Ÿå—ã€‚å¯¹ä½ çš„æŒ£æ‰ä¿æŒè¯šå®å¯ä»¥å‡å°‘å›°æƒ‘å¹¶å»ºç«‹ç†è§£ã€‚"
                    }
                ]
            }
        };

        // State management
        let currentQuestion = 0;
        let answers = [];
        let scores = { secure: 0, anxious: 0, avoidant: 0, fearful: 0 };
        let testStartTime = null;

        // è®¡ç®—æœ€å¤§å¯èƒ½åˆ†æ•°ï¼ˆç”¨äºç™¾åˆ†æ¯”è®¡ç®—ï¼‰
        const maxPossibleScore = questions.length * 3; // æ¯é¢˜æœ€é«˜3åˆ†

        // Utility functions
        function showScreen(screenId) {
            const screens = ['welcomeScreen', 'reflectionScreen', 'attachmentOverview', 'testScreen', 'resultScreen'];
            screens.forEach(id => {
                document.getElementById(id).style.display = 'none';
            });
            document.getElementById(screenId).style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showLoading(show = true) {
            document.getElementById('loadingOverlay').style.display = show ? 'flex' : 'none';
        }

        function showToast(message, icon = 'âœ“', duration = 3000) {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            const toastIcon = document.getElementById('toastIcon');
            
            toastMessage.textContent = message;
            toastIcon.textContent = icon;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }

        function createConfetti() {
            const colors = ['#ff6b9d', '#c44569', '#ffa502', '#ff6348', '#5f27cd', '#00d2d3'];
            const confettiCount = 50;
            
            for (let i = 0; i < confettiCount; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * window.innerWidth + 'px';
                confetti.style.top = '-10px';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 5000);
            }
        }

        function updateProgressDots() {
            const container = document.getElementById('questionProgress');
            container.innerHTML = '';
            
            // åªæ˜¾ç¤ºå‰10ä¸ªç‚¹ï¼ˆé¿å…å¤ªå¤šï¼‰
            const dotsToShow = Math.min(questions.length, 10);
            const interval = Math.floor(questions.length / dotsToShow);
            
            for (let i = 0; i < dotsToShow; i++) {
                const dot = document.createElement('div');
                dot.className = 'progress-dot';
                
                const questionIndex = i * interval;
                if (questionIndex < currentQuestion) {
                    dot.classList.add('completed');
                } else if (questionIndex === currentQuestion) {
                    dot.classList.add('current');
                }
                
                container.appendChild(dot);
            }
        }

        function showModal(title, desc, onConfirm) {
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalDesc').textContent = desc;
            document.getElementById('modal').style.display = 'flex';
            
            const confirmBtn = document.getElementById('modalConfirm');
            confirmBtn.onclick = () => {
                closeModal();
                onConfirm();
            };
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        // Navigation functions
        function startJourney() {
            startTest();
        }

        function startTest() {
            currentQuestion = 0;
            answers = [];
            scores = { secure: 0, anxious: 0, avoidant: 0, fearful: 0 };
            testStartTime = Date.now();
            
            showScreen('testScreen');
            document.getElementById('totalQ').textContent = questions.length;
            showQuestion();
            
            // Save progress
            saveProgress();
        }

        function showAttachmentOverview() {
            showScreen('attachmentOverview');
        }

        function backToWelcome() {
            showScreen('welcomeScreen');
        }

        function showSettings() {
            showModal(
                'è®¾ç½®',
                'è‡ªå®šä¹‰ä½ çš„ä½“éªŒå¹¶ç®¡ç†ä½ çš„æ•°æ®ã€‚åŠŸèƒ½å³å°†æ¨å‡ºï¼',
                () => {}
            );
        }

        // Question management
        function showQuestion() {
            const q = questions[currentQuestion];
            const questionCard = document.querySelector('.question-card');
            
            // Add swipe animation
            if (questionCard) {
                questionCard.classList.remove('swipe-in');
                questionCard.classList.add('swipe-out');
                
                setTimeout(() => {
                    updateQuestionContent();
                    questionCard.classList.remove('swipe-out');
                    questionCard.classList.add('swipe-in');
                }, 150);
            } else {
                updateQuestionContent();
            }
            
            function updateQuestionContent() {
                document.getElementById('currentQ').textContent = currentQuestion + 1;
                document.getElementById('questionIcon').textContent = q.icon;
                document.getElementById('questionTitle').textContent = q.title;
                document.getElementById('questionDesc').textContent = q.desc;
                
                const optionsContainer = document.getElementById('optionsContainer');
                optionsContainer.innerHTML = '';
                
                q.options.forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option';
                    optionDiv.innerHTML = `
                        <div class="option-title">
                            <span class="option-radio"></span>
                            ${option.title}
                        </div>
                        <div class="option-desc">${option.desc}</div>
                    `;
                    optionDiv.onclick = () => selectOption(index);
                    optionsContainer.appendChild(optionDiv);
                });

                // Update progress
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
                
                // Update progress dots
                updateProgressDots();

                // Restore previous answer if exists
                if (answers[currentQuestion] !== undefined) {
                    const options = document.querySelectorAll('.option');
                    options[answers[currentQuestion]].classList.add('selected');
                    document.getElementById('nextBtn').disabled = false;
                } else {
                    document.getElementById('nextBtn').disabled = true;
                }
            }
        }

        function selectOption(index) {
            const options = document.querySelectorAll('.option');
            options.forEach(opt => opt.classList.remove('selected'));
            options[index].classList.add('selected');
            
            answers[currentQuestion] = index;
            document.getElementById('nextBtn').disabled = false;
            
            // Haptic feedback (if supported)
            if (navigator.vibrate) {
                navigator.vibrate(10);
            }
            
            // Save progress (debounced)
            clearTimeout(window.saveTimeout);
            window.saveTimeout = setTimeout(() => {
                saveProgress();
            }, 500);
        }

        function nextQuestion() {
            // è·å–ç”¨æˆ·é€‰æ‹©çš„é€‰é¡¹
            const selectedOption = questions[currentQuestion].options[answers[currentQuestion]];
            
            // å°†è¯¥é€‰é¡¹çš„æ‰€æœ‰åˆ†æ•°ç´¯åŠ åˆ°å¯¹åº”çš„ä¾æ‹ç±»å‹
            scores.secure += selectedOption.scores.secure;
            scores.anxious += selectedOption.scores.anxious;
            scores.avoidant += selectedOption.scores.avoidant;
            scores.fearful += selectedOption.scores.fearful;

            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                finishTest();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function finishTest() {
            // æ˜¾ç¤ºåŠ è½½é¡µé¢
            showScreen('reflectionScreen');
            
            // æ¸…é™¤ä¿å­˜çš„è¿›åº¦
            clearProgress();
            
            // 2.5ç§’åæ˜¾ç¤ºç»“æœ
            setTimeout(() => {
                createConfetti();
                showResults();
            }, 2500);
        }

        // Results
        function showResults() {
            // è®¡ç®—æ¯ç§ä¾æ‹ç±»å‹çš„ç™¾åˆ†æ¯”åˆ†æ•°
            const percentages = {
                secure: (scores.secure / maxPossibleScore * 100).toFixed(1),
                anxious: (scores.anxious / maxPossibleScore * 100).toFixed(1),
                avoidant: (scores.avoidant / maxPossibleScore * 100).toFixed(1),
                fearful: (scores.fearful / maxPossibleScore * 100).toFixed(1)
            };

            // ç¡®å®šä¸»å¯¼ä¾æ‹é£æ ¼ï¼ˆå¾—åˆ†æœ€é«˜çš„ï¼‰
            let maxPercentage = 0;
            let dominantStyle = '';
            
            for (let style in percentages) {
                if (parseFloat(percentages[style]) > maxPercentage) {
                    maxPercentage = parseFloat(percentages[style]);
                    dominantStyle = style;
                }
            }

            const detail = attachmentDetails[dominantStyle];
            const dominantPercentage = percentages[dominantStyle];
            
            // Build characteristics HTML
            let characteristicsHTML = `
                <div class="characteristics">
                    <div class="characteristics-title">
                        <span>âœ¨</span>
                        Key Characteristics
                    </div>
            `;
            detail.characteristics.forEach(char => {
                characteristicsHTML += `
                    <div class="characteristic-item">
                        <div class="characteristic-icon">${char.icon}</div>
                        <div class="characteristic-text">${char.text}</div>
                    </div>
                `;
            });
            characteristicsHTML += '</div>';

            // Build insights HTML - ä½¿ç”¨æ–°çš„ç™¾åˆ†æ¯”æ•°æ®
            let insightsHTML = '<div class="insights-section">';
            const insights = generateInsights(dominantStyle, percentages, scores);
            insights.forEach(insight => {
                insightsHTML += `
                    <div class="insight-card">
                        <div class="insight-header">
                            <div class="insight-icon">${insight.icon}</div>
                            <div class="insight-title">${insight.title}</div>
                        </div>
                        <div class="insight-text">${insight.text}</div>
                    </div>
                `;
            });
            insightsHTML += '</div>';

            // Build growth tips HTML
            let tipsHTML = `
                <div class="growth-tips">
                    <div class="growth-tips-title">
                        <span>ğŸŒ±</span>
                        Growth Path
                    </div>
            `;
            detail.tips.forEach(tip => {
                tipsHTML += `
                    <div class="growth-tip-item">
                        <div class="growth-tip-title">${tip.title}</div>
                        <div class="growth-tip-desc">${tip.desc}</div>
                    </div>
                `;
            });
            tipsHTML += '</div>';

            // Build score distribution HTML - ä½¿ç”¨ç™¾åˆ†æ¯”
            let scoreHTML = `
                <div class="score-distribution">
                    <div class="score-title">Your Attachment Profile</div>
            `;
            
            const styleNames = {
                secure: 'Secure',
                anxious: 'Anxious',
                avoidant: 'Avoidant',
                fearful: 'Fearful'
            };
            
            for (let style in percentages) {
                const percentage = Math.round(percentages[style]);
                scoreHTML += `
                    <div class="score-item">
                        <div class="score-label">
                            <span class="score-name">${styleNames[style]}</span>
                            <span class="score-value">${percentage}%</span>
                        </div>
                        <div class="score-bar-bg">
                            <div class="score-bar-fill ${style}" data-width="${percentage}"></div>
                        </div>
                    </div>
                `;
            }
            scoreHTML += '</div>';

            // Build stats HTML
            const testDuration = Math.round((Date.now() - testStartTime) / 1000 / 60);
            let statsHTML = `
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ¯</div>
                        <div class="stat-value">${Math.round(dominantPercentage)}%</div>
                        <div class="stat-label">Match</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">â±ï¸</div>
                        <div class="stat-value">${testDuration}</div>
                        <div class="stat-label">Minutes</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“Š</div>
                        <div class="stat-value">${questions.length}</div>
                        <div class="stat-label">Questions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-value">100%</div>
                        <div class="stat-label">Complete</div>
                    </div>
                </div>
            `;

            // Build resources HTML
            let resourcesHTML = `
                <div class="resources-section">
                    <div class="resources-title">
                        <span>ğŸ“š</span>
                        Recommended Resources
                    </div>
                    <div class="resource-item" onclick="showToast('æ­£åœ¨æ‰“å¼€ä¹¦ç±æ¨è...', 'ğŸ“–')">
                        <div class="resource-name">Amir Levineè‘—ã€Šä¾æ‹ã€‹</div>
                        <div class="resource-desc">å…³ç³»ä¸­ä¾æ‹ç†è®ºçš„å¿…è¯»å†…å®¹</div>
                    </div>
                    <div class="resource-item" onclick="showToast('æ­£åœ¨æ‰“å¼€æ’­å®¢...', 'ğŸ§')">
                        <div class="resource-name">ä¾æ‹ç†è®ºæ’­å®¢</div>
                        <div class="resource-desc">åŸ¹å…»å®‰å…¨ä¾æ‹çš„æ¯å‘¨æ´å¯Ÿ</div>
                    </div>
                    <div class="resource-item" onclick="showToast('æ­£åœ¨æ‰“å¼€æ²»ç–—å¸ˆæŸ¥æ‰¾...', 'ğŸ’¬')">
                        <div class="resource-name">å¯»æ‰¾æ²»ç–—å¸ˆ</div>
                        <div class="resource-desc">ä¸ä¸“æ³¨ä¾æ‹çš„ä¸“ä¸šäººå£«è”ç³»</div>
                    </div>
                </div>
            `;
            
            showScreen('resultScreen');
            
            document.getElementById('resultContent').innerHTML = `
                <div class="attachment-card">
                    <div class="attachment-badge ${detail.badge}">${detail.badgeText}</div>
                    <h2 class="attachment-name">${detail.name}</h2>
                    <p class="attachment-desc">${detail.desc}</p>
                    ${characteristicsHTML}
                    ${insightsHTML}
                    ${tipsHTML}
                </div>
                ${statsHTML}
                ${scoreHTML}
                ${resourcesHTML}
            `;

            // Animate score bars
            setTimeout(() => {
                document.querySelectorAll('.score-bar-fill').forEach(bar => {
                    bar.style.width = bar.dataset.width + '%';
                });
            }, 100);

            // Save results - ä¿å­˜ç™¾åˆ†æ¯”è€Œä¸æ˜¯åŸå§‹åˆ†æ•°
            saveResults(dominantStyle, percentages);
        }

        function generateInsights(dominantStyle, percentages, rawScores) {
            const insights = [];
            const dominantPercentage = parseFloat(percentages[dominantStyle]);
            
            // Insight 1: ä¸»å¯¼é£æ ¼å¼ºåº¦åˆ†æ
            if (dominantPercentage >= 60) {
                insights.push({
                    icon: 'ğŸ¯',
                    title: "æ¸…æ™°æ¨¡å¼",
                    text: `ä½ çš„${dominantStyle}ä¾æ‹æ¨¡å¼éå¸¸æ˜æ˜¾ï¼ˆ${Math.round(dominantPercentage)}%ï¼‰ã€‚è¿™ç§å¼ºçƒˆå€¾å‘ä¸ºä½ æä¾›äº†ä¸ªäººæˆé•¿å’Œè‡ªæˆ‘ç†è§£çš„æ˜ç¡®æ–¹å‘ã€‚`
                });
            } else if (dominantPercentage >= 40) {
                insights.push({
                    icon: 'ğŸŒˆ',
                    title: "ä¸­ç­‰å€¾å‘",
                    text: `ä½ è¡¨ç°å‡ºä¸­ç­‰ç¨‹åº¦çš„${dominantStyle}æ¨¡å¼ï¼ˆ${Math.round(dominantPercentage)}%ï¼‰ï¼Œå—åˆ°å…¶ä»–é£æ ¼çš„æœ‰æ„ä¹‰å½±å“ã€‚è¿™ç§çµæ´»æ€§åœ¨ä¸åŒå…³ç³»ç¯å¢ƒä¸­å¯èƒ½æ˜¯ä¸€ç§ä¼˜åŠ¿ã€‚`
                });
            } else {
                insights.push({
                    icon: 'ğŸ”„',
                    title: "æ··åˆæ¡£æ¡ˆ",
                    text: `ä½ çš„ä¾æ‹é£æ ¼åœ¨å¤šç§æ¨¡å¼ä¸­ç›¸å½“æ··åˆã€‚è¿™è¡¨æ˜ä½ å¯èƒ½ä¼šæ ¹æ®ç‰¹å®šå…³ç³»æˆ–æƒ…å†µè°ƒæ•´ä½ çš„ä¾æ‹è¡Œä¸ºã€‚`
                });
            }
            
            // Insight 2: å®‰å…¨å‹åŸºç¡€åˆ†æ
            const securePercentage = parseFloat(percentages.secure);
            if (securePercentage >= 35) {
                insights.push({
                    icon: 'ğŸ’ª',
                    title: "å®‰å…¨åŸºç¡€",
                    text: `ä½ æœ‰${Math.round(securePercentage)}%çš„å®‰å…¨ä¾æ‹ç‰¹è´¨ã€‚è¿™ç§å¥åº·åŸºç¡€æä¾›äº†éŸ§æ€§ï¼Œå¯ä»¥å¸®åŠ©ä½ éšç€æ—¶é—´å‘å±•å‡ºæ›´å®‰å…¨çš„æ¨¡å¼ã€‚`
                });
            } else if (securePercentage >= 20) {
                insights.push({
                    icon: 'ğŸŒ±',
                    title: "æˆé•¿ä¸­çš„å®‰å…¨æ„Ÿ",
                    text: `ä½ ${Math.round(securePercentage)}%çš„å®‰å…¨ä¾æ‹åˆ†æ•°æ˜¾ç¤ºäº†æˆé•¿æ½œåŠ›ã€‚é€šè¿‡æ„è¯†å’Œç»ƒä¹ ï¼Œä½ å¯ä»¥åŠ å¼ºè¿™äº›å¥åº·æ¨¡å¼ã€‚`
                });
            }
            
            // Insight 3: æ··åˆæ¨¡å¼åˆ†æ
            const secondHighest = Object.entries(percentages)
                .filter(([style]) => style !== dominantStyle)
                .sort(([, a], [, b]) => parseFloat(b) - parseFloat(a))[0];
            
            if (secondHighest && parseFloat(secondHighest[1]) >= 30) {
                const styleNames = {
                    secure: "å®‰å…¨å‹",
                    anxious: "ç„¦è™‘å‹",
                    avoidant: "å›é¿å‹",
                    fearful: "ææƒ§-å›é¿å‹"
                };
                insights.push({
                    icon: 'ğŸ”',
                    title: "æ¬¡è¦æ¨¡å¼",
                    text: `ä½ è¿˜è¡¨ç°å‡ºæ˜¾è‘—çš„${styleNames[secondHighest[0]]}å€¾å‘ï¼ˆ${Math.round(secondHighest[1])}%ï¼‰ã€‚ä¸åŒæƒ…å†µå¯èƒ½æ¿€æ´»ä½ ä¾æ‹é£æ ¼çš„ä¸åŒæ–¹é¢ã€‚`
                });
            }
            
            // Insight 4: è‡ªæˆ‘è®¤çŸ¥çš„é‡è¦æ€§
            if (insights.length < 3) {
                insights.push({
                    icon: 'ğŸ§ ',
                    title: "æ„è¯†çš„åŠ›é‡",
                    text: "ç†è§£ä½ çš„ä¾æ‹æ¨¡å¼æ˜¯å˜é©æ€§çš„ã€‚ç ”ç©¶è¡¨æ˜ï¼Œä»…ä»…è¯†åˆ«è¿™äº›å€¾å‘å°±èƒ½å¸®åŠ©ä½ åœ¨å…³ç³»ä¸­åšå‡ºæ›´æ˜æ™ºçš„é€‰æ‹©ã€‚"
                });
            }
            
            return insights.slice(0, 3); // æœ€å¤šè¿”å›3ä¸ªæ´å¯Ÿ
        }

        function shareResult() {
            const resultData = localStorage.getItem('attachmentTestResult');
            if (!resultData) return;
            
            const result = JSON.parse(resultData);
            const styleNames = {
                secure: "å®‰å…¨å‹ä¾æ‹",
                anxious: "ç„¦è™‘-çŸ›ç›¾å‹",
                avoidant: "å›é¿-ç–ç¦»å‹",
                fearful: "ææƒ§-å›é¿å‹"
            };
            
            const shareText = `I discovered my attachment style: ${styleNames[result.style]}! ğŸŒ±\n\nTake the PsycheFit test and learn about yourself.`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'æˆ‘çš„ä¾æ‹é£æ ¼ - PsycheFit',
                    text: shareText,
                    url: window.location.href
                }).then(() => {
                    showToast('æ„Ÿè°¢åˆ†äº«ï¼ğŸ’š', 'âœ“');
                }).catch(() => {});
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(shareText + '\n' + window.location.href).then(() => {
                    showToast('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼', 'ğŸ“‹');
                }).catch(() => {
                    showToast('æ— æ³•åˆ†äº«', 'âŒ');
                });
            }
        }

        function restartTest() {
            showModal(
                'é‡æ–°å¼€å§‹ï¼ŸğŸ”„',
                'ä½ å½“å‰çš„ç»“æœå°†ä¿å­˜åœ¨å†å²è®°å½•ä¸­ã€‚å‡†å¤‡å¥½å†æ¬¡æ¢ç´¢ä½ çš„ä¾æ‹é£æ ¼äº†å—ï¼Ÿ',
                () => {
                    clearProgress();
                    showToast('å¼€å§‹æ–°çš„æ—…ç¨‹...', 'ğŸŒ±');
                    setTimeout(() => {
                        showScreen('welcomeScreen');
                    }, 500);
                }
            );
        }

        function showStyleDetail(style) {
            const detail = attachmentDetails[style];
            showModal(
                detail.name,
                detail.desc,
                () => {}
            );
        }

        // Local storage functions
        function saveProgress() {
            const progress = {
                currentQuestion,
                answers,
                scores,
                timestamp: Date.now()
            };
            localStorage.setItem('attachmentTestProgress', JSON.stringify(progress));
        }

        function loadProgress() {
            const saved = localStorage.getItem('attachmentTestProgress');
            if (saved) {
                const progress = JSON.parse(saved);
                // Only load if less than 24 hours old
                if (Date.now() - progress.timestamp < 24 * 60 * 60 * 1000) {
                    return progress;
                }
            }
            return null;
        }

        function clearProgress() {
            localStorage.removeItem('attachmentTestProgress');
        }

        function saveResults(style, percentages) {
            const result = {
                style,
                scores,
                percentages,
                date: new Date().toISOString(),
                duration: Date.now() - testStartTime
            };
            
            // Save current result
            localStorage.setItem('attachmentTestResult', JSON.stringify(result));
            
            // Save to history
            let history = JSON.parse(localStorage.getItem('attachmentTestHistory') || '[]');
            history.push(result);
            // Keep only last 10 results
            if (history.length > 10) history = history.slice(-10);
            localStorage.setItem('attachmentTestHistory', JSON.stringify(history));
        }

        // Header scroll effect
        let lastScrollY = 0;
        window.addEventListener('scroll', () => {
            const header = document.getElementById('header');
            if (window.scrollY > 10) {
                header.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
            }
            lastScrollY = window.scrollY;
        });

        // Initialize on load
        document.addEventListener('DOMContentLoaded', () => {
            // Check for saved progress
            const saved = loadProgress();
            if (saved && saved.currentQuestion > 0) {
                showModal(
                    'æ¬¢è¿å›æ¥ï¼ğŸ‘‹',
                    `ä½ åœ¨ç¬¬${saved.currentQuestion + 1}é¢˜ã€‚ä½ æƒ³ä»ä¸Šæ¬¡ç¦»å¼€çš„åœ°æ–¹ç»§ç»­å—ï¼Ÿ`,
                    () => {
                        currentQuestion = saved.currentQuestion;
                        answers = saved.answers;
                        scores = saved.scores;
                        testStartTime = saved.timestamp;
                        showScreen('testScreen');
                        showQuestion();
                        showToast('è¿›åº¦å·²æ¢å¤', 'âœ“');
                    }
                );
            }

            // Add keyboard navigation
            document.addEventListener('keydown', (e) => {
                const testScreen = document.getElementById('testScreen');
                if (testScreen.style.display !== 'block') return;

                if (e.key === 'ArrowLeft' && currentQuestion > 0) {
                    previousQuestion();
                } else if (e.key === 'ArrowRight' && !document.getElementById('nextBtn').disabled) {
                    nextQuestion();
                } else if (e.key >= '1' && e.key <= '4') {
                    const index = parseInt(e.key) - 1;
                    const options = document.querySelectorAll('.option');
                    if (options[index]) {
                        options[index].click();
                    }
                } else if (e.key === 'Enter' && !document.getElementById('nextBtn').disabled) {
                    nextQuestion();
                }
            });

            // Prevent accidental page reload during test
            window.addEventListener('beforeunload', (e) => {
                const testScreen = document.getElementById('testScreen');
                if (testScreen.style.display === 'block' && currentQuestion > 0 && currentQuestion < questions.length - 1) {
                    e.preventDefault();
                    e.returnValue = 'ä½ çš„æµ‹è¯•è¿›åº¦å°†è¢«ä¿å­˜ï¼Œä½†ä½ ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿ';
                }
            });

            // Add smooth scroll behavior
            document.documentElement.style.scrollBehavior = 'smooth';

            // Enhanced touch feedback
            const addTouchFeedback = (selector) => {
                document.querySelectorAll(selector).forEach(el => {
                    el.addEventListener('touchstart', function() {
                        this.style.transform = 'scale(0.98)';
                        this.style.opacity = '0.9';
                    });
                    el.addEventListener('touchend', function() {
                        this.style.transform = '';
                        this.style.opacity = '';
                    });
                });
            };

            // Apply to interactive elements
            setTimeout(() => {
                addTouchFeedback('button');
                addTouchFeedback('.option');
                addTouchFeedback('.style-card');
                addTouchFeedback('.resource-item');
            }, 100);

            // Auto-save interval (every 30 seconds during test)
            setInterval(() => {
                const testScreen = document.getElementById('testScreen');
                if (testScreen.style.display === 'block' && answers.length > 0) {
                    saveProgress();
                }
            }, 30000);

            // Check if user has previous results
            const previousResult = localStorage.getItem('attachmentTestResult');
            if (previousResult && !saved) {
                // Add a subtle indicator that they've taken the test before
                console.log('Previous results found');
            }

            // Performance optimization: lazy load animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '50px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);

            // Show welcome message
            setTimeout(() => {
                if (!saved && !previousResult) {
                    showToast('æ¬¢è¿æ¥åˆ°PsycheFitï¼ğŸŒ±', 'ğŸ‘‹', 4000);
                }
            }, 1000);
        });
    </script>
</body>
</html>
